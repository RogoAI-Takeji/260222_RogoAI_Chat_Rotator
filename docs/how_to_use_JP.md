# 使い方ガイド — 老後AI チャットローテーター

## 目次

1. [起動方法](#1-起動方法)
2. [Web AIの設定](#2-web-aiの設定)
3. [基本操作（センダー画面）](#3-基本操作センダー画面)
4. [回答の収集（ビューワー画面）](#4-回答の収集ビューワー画面)
5. [応用機能](#5-応用機能)
6. [Local LLMの追加](#6-local-llmの追加)
7. [新しいWeb AIの追加](#7-新しいweb-aiの追加)
8. [よくある質問](#8-よくある質問)

---

## 1. 起動方法

```bash
python src/chat_rotator_v3_7c.py
```

初回起動時にデータベースと設定ファイルが自動作成されます。

---

## 2. Web AIの設定

**AI SERVICES** 画面で使用するAIにチェックを入れます。

| デフォルト登録AI | URL |
|----------------|-----|
| Claude | https://claude.ai |
| Gemini | https://gemini.google.com |
| Grok | https://grok.com |
| ChatGPT | https://chatgpt.com |

- **ロール（役割）** を自由に変更できます（例：「法律専門家」「コスト分析担当」）
- 新しいWeb AIは「Add Web AI」ボタンから追加できます

---

## 3. 基本操作（センダー画面）

### 3-1. AIブラウザの起動

1. 使用するAIにチェックを入れる（最大4つ）
2. **[LAUNCH GRID]** ボタンをクリック
3. 各AI用のChromeブラウザが起動します
4. 初回のみ各サービスにログインしてください（次回以降は自動ログイン）

### 3-2. プロンプトの送信

1. プロンプト入力欄に質問を入力する
2. 必要に応じてフレームワーク・ビューポイント・出力形式を選択する
3. AIカードのクリップボードボタン（📋）をクリック
4. 専用ブラウザの入力欄が前面に表示される
5. **Ctrl+V** または右クリック→貼り付けでプロンプトを貼り付ける
6. 手動で送信ボタンを押す
7. すべてのAIに対して繰り返す

> ⚠️ 手動操作は各AIサービスの利用規約を遵守するための設計です

### 3-3. プロンプト補助機能

| 機能 | 説明 |
|------|------|
| **フレームワーク** | SWOT / PREP / MECE / 5W1H / PDCA / STAR |
| **ビューポイント** | 法的 / UX / コスト / 技術 / 市場 / カスタム |
| **出力フォーマット** | 箇条書き / 表 / 図解 / 簡潔 / ステップ |
| **個別指示** | 各AIに異なる追加指示を設定可能 |
| **プロンプトプレビュー** | 実際に送信されるプロンプトを確認 |

---

## 4. 回答の収集（ビューワー画面）

1. AIの回答が返ってきたら、各AIサイトの **コピーボタン** を押す
   - Geminiは3連ボタンの中にあります
2. ビューワー画面の **[取り込み]** ボタンをクリック
3. すべてのAIの回答を同様に取り込む

### データベースの列

| 列 | 説明 |
|----|------|
| タイムスタンプ | 回答収集日時 |
| サービス名 | AIの名前 |
| ラベル | 分類タグ |
| 質問 | 送信したプロンプト |
| 回答 | AIの回答 |
| ソース | CB（クリップボード）/ CLI（Local LLM）/ LOC（ローカル） |

### 検索

- **スペース区切り** → AND検索
- **カンマ区切り** → OR検索
- **!プレフィックス** → NOT検索（例：`!気候変動`）

---

## 5. 応用機能

### Summary（要約）

複数AIの回答を別のAIに要約させます。

1. ビューワーで要約したい回答を複数選択（Shift/Ctrl+クリック）
2. **[Summary]** ボタン → 送信先AIを選択
3. 作成されたプロンプトをセンダー画面で手動送信

### Difference（差分）

複数AIの意見の相違を抽出します。

1. 比較したい回答を複数選択
2. **[Difference]** ボタン → 送信先AIを選択
3. **[Run Analysis]** → プロンプト作成 → 手動送信

### Follow-up（引き継ぎ）

利用制限中のAIのタスクを別のAIに引き継ぎます。

1. 引き継ぎたいタスクの回答を選択
2. **[Follow-up]** → 依頼先AIを指定
3. 生成された仕様書プロンプトを手動送信

---

## 6. Local LLMの追加

### OLLAMA

```bash
# OLLAMAサーバーを起動（別ターミナルで）
ollama serve

# モデルを取得（例）
ollama pull llama3.1
ollama pull qwen3
```

1. **AI SERVICES** 画面 → **[Add Local LLM]**
2. OLLAMAを選択、モデル名を入力（または「モデル一覧を取得」で確認）
3. センダー画面でLocal LLMに **⚡ボタン**（個別送信）または **[Send All Local LLM]**（一斉送信）

### LM Studio

1. LM Studioを起動し、ローカルサーバーをONにする（デフォルト: `localhost:1234`）
2. 同様の手順で追加

---

## 7. 新しいWeb AIの追加

1. **AI SERVICES** 画面 → **[Add Web AI]**
2. 名前・URL・ロールを入力
3. センダー画面に戻り、Launch Gridで呼び出す

**エージェント系AI（Manus等）のコツ：**
グラフや表が含まれる回答はコピーできないことがあります。その場合、AIに次のように指示してください：

```
レポートをコピー可能なテキスト形式としてHTMLの中に提示してください
```

---

## 8. よくある質問

**Q: 自動送信に対応していないのはなぜですか？**
A: 各AIサービスの利用規約でスクレーピングや自動操作は禁止されています。本アプリはその範囲内で安全に動作するよう設計しています。

**Q: サービス名が正しく表示されない場合は？**
A: 回答のシグネチャ突合に失敗した場合です。右クリック → 「サービス名を変更」で手動修正できます。SETTINGS画面で突合度を調整することもできます。

**Q: Local LLMでエラーが出る場合は？**
A: モデル名が正確かどうか確認してください。`モデル一覧を取得`ボタンで実際に利用可能なモデルを確認できます。

**Q: 画像をWeb AIに送れますか？**
A: クリップボード経由での画像送信はサポートしていません。各AIサイトのアップロードボタンから手動でアップロードしてください。画像の自動送信はLocal LLMのみ対応しています。
